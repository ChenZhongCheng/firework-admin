!function(){function d(a,e){return{restrict:"EA",scope:{gmtOffset:"=gmtOffset",digitalFormat:"=digitalFormat",showDigital:"=showDigital",showAnalog:"=showAnalog",startTime:"=startTime",theme:"=theme"},template:'<div class="widget-clock" ng-class="themeClass" ng-if="date"><div class="digital" ng-if="digital"><span class="time"><span class="hours">{{digital}}</span></span></div><div class="analog" ng-if="analog"><div class="square"><svg viewBox="0 0 100 100"><g transform="translate(50,50)"><circle class="clock-face" r="48" /><line ng-repeat="minor in minors track by $index" class="minor" y1="42" y2="45" ng-attr-transform="rotate({{360 * $index / minors.length}})" /><line ng-repeat="major in majors track by $index" class="major" y1="35" y2="46" ng-attr-transform="rotate({{360 * $index / majors.length}})" /><line class="hour" y1="2" y2="-20" ng-attr-transform="rotate({{30 * date.hrs + date.mins / 2}})" /><line class="minute" y1="4" y2="-30" ng-attr-transform="rotate({{6 * date.mins + date.secs / 10}})" /><g ng-attr-transform="rotate({{6 * date.secs}})"><line class="second" y1="10" y2="-38" /><line class="second-counterweight" y1="10" y2="2" /></g></g></svg></div></div><div ng-if="gmtInfo" class="gmt-info">{{gmtInfo}}</div></div>',link:function(v,i,n){var p,k={},u=v.gmtOffset,q=v.digitalFormat?v.digitalFormat:"HH:mm:ss";k.showDigital=null!=v.showDigital?v.showDigital:void 0!==n.showDigital?!0:!1,k.showAnalog=null!=v.showAnalog?v.showAnalog:void 0!==n.showAnalog?!0:!1,k.showGmtInfo=void 0!==n.showGmtInfo?!0:!1,k.startTime=parseInt(v.startTime,10),v.themeClass=v.theme?v.theme:n.theme?n.theme:"light",k.showDigital||k.showAnalog||(k.showAnalog=!0,k.showDigital=!0),v.gmtInfo=!1,v.date=c(k),v.digital=k.showDigital?"Loading..":!1,v.analog=k.showAnalog,v.majors=new Array(12),v.minors=new Array(60);var o=null,t=function(){isNaN(k.startTime)||(k.startTime=k.startTime+1000),o=c(k),v.date=o,k.showDigital&&(v.digital=h(o,q,u,e))};p=a(t,1000),v.$watch("gmtOffset",function(l){u=l,k.gmtOffset=null!=u?b(u):!1,k.showGmtInfo&&k.gmtOffset!==!1&&(v.gmtInfo=g(k.gmtOffset)),t()}),v.$watch("digitalFormat",function(m,l){m!=l&&(q=m)}),v.$watch("showDigital",function(m,l){m!=l&&(k.showDigital=m,v.digital=k.showDigital?"Loading..":!1)}),v.$watch("showAnalog",function(m,l){m!=l&&(k.showAnalog=m,v.analog=m)}),v.$watch("theme",function(m,l){m!=l&&(v.themeClass=m?m:n.theme?n.theme:"light")}),i.on("$destroy",function(){a.cancel(p),p=null})}}}function b(k){k=parseFloat(k);var i=k>0?Math.floor(k):Math.ceil(k),l=k%1/0.6;return i+l}function g(k){var i=k>0?Math.floor(k):Math.ceil(k),l=Math.round((k>0?k:-1*k)%1*60);return"GMT"+(0===k?"":(k>0?" +":" ")+j(i)+"."+f(l).substring(0,2))}function j(a){return 0>a?(a>-10?"-0":"-")+-1*a:(10>a?"0":"")+a}function f(a){return a+(10>a?"0":"")}function c(k){var i=isNaN(k.startTime)?new Date:new Date(k.startTime);if(null!==k.gmtOffset&&k.gmtOffset!==!1){var l=i.getTime()+60000*i.getTimezoneOffset(),m=new Date(l+3600000*k.gmtOffset);return{hrs:m.getHours(),mins:m.getMinutes(),secs:m.getSeconds(),date:m}}return{hrs:i.getHours(),mins:i.getMinutes(),secs:i.getSeconds(),date:i}}function h(k,i,l,m){return m("date")(k.date,i,l)}angular.module("ds.clock",[]).directive("dsWidgetClock",["$interval","$filter",function(i,k){return d(i,k)}])}();