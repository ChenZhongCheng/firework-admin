angular.module("cgBusy",[]),angular.module("cgBusy").factory("_cgBusyTrackerFactory",["$timeout","$q",function(d,c){return function(){var b={};b.promises=[],b.delayPromise=null,b.durationPromise=null,b.delayJustFinished=!1,b.reset=function(e){b.minDuration=e.minDuration,b.promises=[],angular.forEach(e.promises,function(f){f&&!f.$cgBusyFulfilled&&a(f)}),0!==b.promises.length&&(b.delayJustFinished=!1,e.delay&&(b.delayPromise=d(function(){b.delayPromise=null,b.delayJustFinished=!0},parseInt(e.delay,10))),e.minDuration&&(b.durationPromise=d(function(){b.durationPromise=null},parseInt(e.minDuration,10)+(e.delay?parseInt(e.delay,10):0))))},b.isPromise=function(f){var e=f&&(f.then||f.$then||f.$promise&&f.$promise.then);return"undefined"!=typeof e},b.callThen=function(g,k,j){var i;g.then||g.$then?i=g:g.$promise?i=g.$promise:g.denodeify&&(i=c.when(g));var h=i.then||i.$then;h.call(i,k,j)};var a=function(e){if(!b.isPromise(e)){throw new Error("cgBusy expects a promise (or something that has a .promise or .$promise")}-1===b.promises.indexOf(e)&&(b.promises.push(e),b.callThen(e,function(){e.$cgBusyFulfilled=!0,-1!==b.promises.indexOf(e)&&b.promises.splice(b.promises.indexOf(e),1)},function(){e.$cgBusyFulfilled=!0,-1!==b.promises.indexOf(e)&&b.promises.splice(b.promises.indexOf(e),1)}))};return b.active=function(){return b.delayPromise?!1:b.delayJustFinished?(b.delayJustFinished=!1,b.promises.length>0):b.durationPromise?!0:b.promises.length>0},b}}]),angular.module("cgBusy").value("cgBusyDefaults",{}),angular.module("cgBusy").directive("cgBusy",["$compile","$templateCache","cgBusyDefaults","$http","_cgBusyTrackerFactory",function(g,f,j,i,h){return{restrict:"A",link:function(v,u,t){var s=u.css("position");("static"===s||""===s||"undefined"==typeof s)&&u.css("position","relative");var r,q,e,d,c,b=h(),a={templateUrl:"angular-busy.html",delay:0,minDuration:0,backdrop:!0,message:"Please Wait...",wrapperClass:"cg-busy cg-busy-animation"};angular.extend(a,j),v.$watchCollection(t.cgBusy,function(k){if(k||(k={promise:null}),angular.isString(k)){throw new Error("Invalid value for cg-busy. cgBusy no longer accepts string ids to represent promises/trackers.")}(angular.isArray(k)||b.isPromise(k))&&(k={promise:k}),k=angular.extend(angular.copy(a),k),k.templateUrl||(k.templateUrl=a.templateUrl),angular.isArray(k.promise)||(k.promise=[k.promise]),d||(d=v.$new()),d.$message=k.message,angular.equals(b.promises,k.promise)||b.reset({promises:k.promise,delay:k.delay,minDuration:k.minDuration}),d.$cgBusyIsActive=function(){return b.active()},r&&e===k.templateUrl&&c===k.backdrop||(r&&r.remove(),q&&q.remove(),e=k.templateUrl,c=k.backdrop,i.get(e,{cache:f}).success(function(l){if(k.backdrop="undefined"==typeof k.backdrop?!0:k.backdrop,k.backdrop){var n='<div class="cg-busy cg-busy-backdrop cg-busy-backdrop-animation ng-hide" ng-show="$cgBusyIsActive()"></div>';q=g(n)(d),u.append(q)}var m='<div class="'+k.wrapperClass+' ng-hide" ng-show="$cgBusyIsActive()">'+l+"</div>";r=g(m)(d),angular.element(r.children()[0]).css("position","absolute").css("top",0).css("left",0).css("right",0).css("bottom",0),u.append(r)}).error(function(l){throw new Error("Template specified for cgBusy ("+k.templateUrl+") could not be loaded. "+l)}))},!0)}}}]),angular.module("cgBusy").run(["$templateCache",function(b){b.put("angular-busy.html",'<div class="cg-busy-default-wrapper">\r\n\r\n   <div class="cg-busy-default-sign">\r\n\r\n      <div class="cg-busy-default-spinner">\r\n         <div class="bar1"></div>\r\n         <div class="bar2"></div>\r\n         <div class="bar3"></div>\r\n         <div class="bar4"></div>\r\n         <div class="bar5"></div>\r\n         <div class="bar6"></div>\r\n         <div class="bar7"></div>\r\n         <div class="bar8"></div>\r\n         <div class="bar9"></div>\r\n         <div class="bar10"></div>\r\n         <div class="bar11"></div>\r\n         <div class="bar12"></div>\r\n      </div>\r\n\r\n      <div class="cg-busy-default-text">{{$message}}</div>\r\n\r\n   </div>\r\n\r\n</div>')}]);